function ScreenWizard(t){var i=this,e=[],n=0,o=null,a=null,r=0,s={buttonStrings:['<i class="far fa-check"></i> Понятно','<i class="far fa-check"></i> Дальше','<i class="far fa-check"></i> Ок','<i class="far fa-check"></i> Ясно'],fogPadding:4,autostart:!0,stopOnOverlayClick:!0,showOnce:!0,hintHtml:'<div class="wizard-hint-str"></div><a href="#" class="wizard-hint-button">Ok</span></a>'},d=!1,c=[];return this.init=function(){i.getOptions(),!t.autostart||d&&t.showOnce||i.start()},this.getOptions=function(){t=t||{};for(var i in s)i in t||(t[i]=s[i]);"wizardPlayed"in localStorage&&!1!==(c=JSON.parse(localStorage.wizardPlayed)).indexOf(location.pathname)&&(d=!0)},this.start=function(){n=0,r=0,window.scrollTo(0,0),i.getSteps(),e.length&&(document.body.style.overflow="hidden",i.showHint(e[0]))},this.getSteps=function(){var t=document.querySelectorAll("[data-wizard]");e=[],t.forEach(function(t){e.push(t)}),e.sort(function(t,i){return(t.dataset.index||0)>(i.dataset.index||0)?1:-1})},this.showHint=function(t){t.classList.add("wizard-active");var e=t.getBoundingClientRect();i.setFogBounds(e),i.setHint(t.dataset.wizard,e)},this.setHint=function(t,e){a||i.createHint(),a.text.innerHTML=t,a.container.style.left=e.left+e.width/2+"px",a.container.style.top=e.bottom+"px"},this.createHint=function(){var e=document.createElement("div");e.className="wizard-hint",e.innerHTML=t.hintHtml,document.body.appendChild(e),(a={text:e.querySelector(".wizard-hint-str"),button:e.querySelector(".wizard-hint-button"),container:e}).button.innerHTML=t.buttonStrings[r],a.button.addEventListener("click",i.nextHint),setTimeout(function(){a.container.classList.add("active")},1e3)},this.nextHint=function(){e[n].classList.remove("wizard-active"),n++,e.length>n?(i.showHint(e[n]),i.nextHintButton()):i.exitWizard()},this.nextHintButton=function(){r++,t.buttonStrings.length<=r&&(r=0),a.button.innerHTML=t.buttonStrings[r]},this.exitWizard=function(){c.push(location.pathname),localStorage.wizardPlayed=JSON.stringify(c),o.container.remove(),a.container.remove(),o=null,a=null,document.body.style.overflow="auto"},this.setFogBounds=function(e){o||i.createFog(),o.top.style.height=e.top-t.fogPadding+"px",o.bottom.style.top=e.bottom+t.fogPadding+"px",o.left.style.width=e.left-t.fogPadding+"px",o.left.style.height=e.height+2*t.fogPadding+"px",o.left.style.top=e.top-t.fogPadding+"px",o.right.style.left=e.right+t.fogPadding+"px",o.right.style.height=o.left.style.height,o.right.style.top=o.left.style.top},this.createFog=function(){var e=document.createElement("div");e.className="wizard-fog",e.innerHTML='<div class="wizard-fog-top"></div><div class="wizard-fog-right"></div><div class="wizard-fog-bottom"></div><div class="wizard-fog-left"></div>',document.body.appendChild(e),o={top:e.querySelector(".wizard-fog-top"),right:e.querySelector(".wizard-fog-right"),bottom:e.querySelector(".wizard-fog-bottom"),left:e.querySelector(".wizard-fog-left"),container:e},setTimeout(function(){o.container.classList.add("active")},1e3),t.stopOnOverlayClick&&(o.left.addEventListener("click",i.exitWizard),o.right.addEventListener("click",i.exitWizard),o.top.addEventListener("click",i.exitWizard),o.bottom.addEventListener("click",i.exitWizard))},i.init(),this}